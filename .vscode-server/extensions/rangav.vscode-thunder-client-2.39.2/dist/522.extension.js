"use strict";exports.id=522,exports.ids=[522],exports.modules={1308(e,o,n){n.d(o,{fromTokenFile:()=>a});var r=n(84),t=n(63),s=n(1307),i=n(10);const c="AWS_WEB_IDENTITY_TOKEN_FILE",a=(e={})=>async o=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");const a=e?.webIdentityTokenFile??process.env[c],d=e?.roleArn??process.env.AWS_ROLE_ARN,l=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!a||!d)throw new t.C("Web identity configuration not specified",{logger:e.logger});const p=await(e=>async o=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:r,roleSessionName:t,webIdentityToken:s,providerId:i,policyArns:c,policy:a,durationSeconds:d}=e;let{roleAssumerWithWebIdentity:l}=e;if(!l){const{getDefaultRoleAssumerWithWebIdentity:r}=await n.e(827).then(n.bind(n,1321));l=r({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...o?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:t??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:c,Policy:a,DurationSeconds:d})})({...e,webIdentityToken:s.Z?.getTokenRecord?.()[a]??(0,i.readFileSync)(a,{encoding:"ascii"}),roleArn:d,roleSessionName:l})(o);return a===process.env[c]&&(0,r.g)(p,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),p}},1307(e,o,n){n.d(o,{Z:()=>s});var r=n(1302),t=n(71);const s={getFileRecord:()=>t.Jj,interceptFile(e,o){t.Jj[e]=Promise.resolve(o)},getTokenRecord:()=>r.a,interceptToken(e,o){r.a[e]=o}}},1303(e,o,n){n.d(o,{C:()=>i});var r=n(9),t=n(5),s=n(69);const i=e=>{const o=(0,r.createHash)("sha1").update(e).digest("hex");return(0,t.join)((0,s.R)(),".aws","sso","cache",`${o}.json`)}},1302(e,o,n){n.d(o,{a:()=>s,v:()=>i});var r=n(31),t=n(1303);const s={},i=async e=>{if(s[e])return s[e];const o=(0,t.C)(e),n=await(0,r.readFile)(o,"utf8");return JSON.parse(n)}}};