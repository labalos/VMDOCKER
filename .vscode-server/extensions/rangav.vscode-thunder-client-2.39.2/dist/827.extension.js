"use strict";exports.id=827,exports.ids=[827],exports.modules={1321(t,e,n){n.d(e,{getDefaultRoleAssumer:()=>hi,getDefaultRoleAssumerWithWebIdentity:()=>pi});var i=n(84),r=n(97),s=n(59);const o={silence:!1};var a=n(137),c=n(138);const u={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var l=n(121),d=n(123);class f extends d.T{constructor(t){super(t),Object.setPrototypeOf(this,f.prototype)}}class h extends f{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,h.prototype)}}class p extends f{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,p.prototype)}}class m extends f{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,m.prototype)}}class g extends f{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,g.prototype)}}class w extends f{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,w.prototype)}}class E extends f{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,E.prototype)}}class y extends f{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,y.prototype)}}const v="AssumedRoleUser",b="Credentials",x="DurationSeconds",I="Policy",S="PolicyArns",T="PackedPolicySize",A="RoleArn",P="RoleSessionName",$="SourceIdentity",N="awsQueryError",D="client",R="error",C="httpError",k="message",O="smithy.ts.sdk.synthetic.com.amazonaws.sts",F="com.amazonaws.sts";var j=[0,F,"accessKeySecretType",8,0],M=[0,F,"clientTokenType",8,0],_=[3,F,v,0,["AssumedRoleId","Arn"],[0,0],2],U=[3,F,"AssumeRoleRequest",0,[A,P,S,I,x,"Tags","TransitiveTagKeys","ExternalId","SerialNumber","TokenCode",$,"ProvidedContexts"],[0,0,()=>et,0,1,()=>it,64,0,0,0,0,()=>nt],2],L=[3,F,"AssumeRoleResponse",0,[b,v,T,$],[[()=>V,0],()=>_,1,0]],W=[3,F,"AssumeRoleWithWebIdentityRequest",0,[A,P,"WebIdentityToken","ProviderId",S,I,x],[0,0,[()=>M,0],0,()=>et,0,1],3],z=[3,F,"AssumeRoleWithWebIdentityResponse",0,[b,"SubjectFromWebIdentityToken",v,T,"Provider","Audience",$],[[()=>V,0],0,()=>_,1,0,0,0]],V=[3,F,b,0,["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],[0,[()=>j,0],0,4],4],q=[-3,F,"ExpiredTokenException",{[N]:["ExpiredTokenException",400],[R]:D,[C]:400},[k],[0]];l.O.for(F).registerError(q,h);var Y=[-3,F,"IDPCommunicationErrorException",{[N]:["IDPCommunicationError",400],[R]:D,[C]:400},[k],[0]];l.O.for(F).registerError(Y,y);var K=[-3,F,"IDPRejectedClaimException",{[N]:["IDPRejectedClaim",403],[R]:D,[C]:403},[k],[0]];l.O.for(F).registerError(K,w);var B=[-3,F,"InvalidIdentityTokenException",{[N]:["InvalidIdentityToken",400],[R]:D,[C]:400},[k],[0]];l.O.for(F).registerError(B,E);var G=[-3,F,"MalformedPolicyDocumentException",{[N]:["MalformedPolicyDocument",400],[R]:D,[C]:400},[k],[0]];l.O.for(F).registerError(G,p);var Q=[-3,F,"PackedPolicyTooLargeException",{[N]:["PackedPolicyTooLarge",400],[R]:D,[C]:400},[k],[0]];l.O.for(F).registerError(Q,m);var X=[3,F,"PolicyDescriptorType",0,["arn"],[0]],H=[3,F,"ProvidedContext",0,["ProviderArn","ContextAssertion"],[0,0]],J=[-3,F,"RegionDisabledException",{[N]:["RegionDisabledException",403],[R]:D,[C]:403},[k],[0]];l.O.for(F).registerError(J,g);var Z=[3,F,"Tag",0,["Key","Value"],[0,0],2],tt=[-3,O,"STSServiceException",0,[],[]];l.O.for(O).registerError(tt,f);var et=[1,F,"policyDescriptorListType",0,()=>X],nt=[1,F,"ProvidedContextsListType",0,()=>H],it=[1,F,"tagListType",0,()=>Z],rt=[9,F,"AssumeRole",0,()=>U,()=>L],st=[9,F,"AssumeRoleWithWebIdentity",0,()=>W,()=>z];class ot extends(c.u.classBuilder().ep(u).m(function(t,e,n,i){return[(0,a.r)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").sc(rt).build()){}class at extends(c.u.classBuilder().ep(u).m(function(t,e,n,i){return[(0,a.r)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").sc(st).build()){}const ct=t=>{if("string"==typeof t?.Arn){const e=t.Arn.split(":");if(e.length>4&&""!==e[4])return e[4]}},ut=async(t,e,n,i={})=>{const a="function"==typeof t?await t():t,c="function"==typeof e?await e():e;let u="";const l=a??c??(u=await function(t={}){return(0,s.Z)({...r.GG,default:async()=>(o.silence,"us-east-1")},{...r.zH,...t})}(i)());return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${a} (credential provider clientConfig)`,`${c} (contextual client)`,`${u} (STS default: AWS_REGION, profile region, or us-east-1)`),l},lt=(t,e)=>{let n,r;return async(s,o)=>{if(r=s,!n){const{logger:i=t?.parentClientConfig?.logger,profile:s=t?.parentClientConfig?.profile,region:o,requestHandler:a=t?.parentClientConfig?.requestHandler,credentialProviderLogger:c,userAgentAppId:u=t?.parentClientConfig?.userAgentAppId}=t,l=await ut(o,t?.parentClientConfig?.region,c,{logger:i,profile:s}),d=!ft(a);n=new e({...t,userAgentAppId:u,profile:s,credentialDefaultProvider:()=>async()=>r,region:l,requestHandler:d?a:void 0,logger:i})}const{Credentials:a,AssumedRoleUser:c}=await n.send(new ot(o));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);const u=ct(c),l={accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,...a.CredentialScope&&{credentialScope:a.CredentialScope},...u&&{accountId:u}};return(0,i.g)(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},dt=(t,e)=>{let n;return async r=>{if(!n){const{logger:i=t?.parentClientConfig?.logger,profile:r=t?.parentClientConfig?.profile,region:s,requestHandler:o=t?.parentClientConfig?.requestHandler,credentialProviderLogger:a,userAgentAppId:c=t?.parentClientConfig?.userAgentAppId}=t,u=await ut(s,t?.parentClientConfig?.region,a,{logger:i,profile:r}),l=!ft(o);n=new e({...t,userAgentAppId:c,profile:r,region:u,requestHandler:l?o:void 0,logger:i})}const{Credentials:s,AssumedRoleUser:o}=await n.send(new at(r));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);const a=ct(o),c={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...a&&{accountId:a}};return a&&(0,i.g)(c,"RESOLVED_ACCOUNT_ID","T"),(0,i.g)(c,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),c}},ft=t=>"h2"===t?.metadata?.handlerProtocol;var ht=n(36),pt=n(38),mt=n(39),gt=n(40),wt=n(42),Et=n(47),yt=n(49),vt=n(48),bt=n(52),xt=n(53),It=n(55),St=n(56),Tt=n(74),At=n(78),Pt=n(81),$t=n(83),Nt=n(50),Dt=n(57);const Rt=async(t,e,n)=>({operation:(0,Nt.u)(e).operation,region:await(0,Dt.t)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});const Ct=t=>{const e=[];if("AssumeRoleWithWebIdentity"===t.operation)e.push({schemeId:"smithy.api#noAuth"});else e.push(function(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(t,e)=>({signingProperties:{config:t,context:e}})}}(t));return e},kt=t=>{const e=(n=t,Object.assign(n,{stsClientCtor:di}));var n;const i=(0,$t.h)(e);return Object.assign(i,{authSchemePreference:(0,Dt.t)(t.authSchemePreference??[])})};var Ot=n(1320),Ft=n(91),jt=n(92),Mt=n(110),_t=n(94),Ut=n(96),Lt=n(98),Wt=n(101),zt=n(1318),Vt=n(102),qt=n(103),Yt=n(104),Kt=n(106),Bt=n(105),Gt=n(107),Qt=n(109),Xt=n(75),Ht=n(111),Jt=n(115),Zt=n(113),te=n(112),ee=n(122);const ne={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t},captureMetaData:!1},ie=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",re=new RegExp("^"+("["+ie+"]["+(ie+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*")+"$");function se(t,e){const n=[];let i=e.exec(t);for(;i;){const r=[];r.startIndex=e.lastIndex-i[0].length;const s=i.length;for(let t=0;t<s;t++)r.push(i[t]);n.push(r),i=e.exec(t)}return n}const oe=function(t){const e=re.exec(t);return!(null==e)};let ae;ae="function"!=typeof Symbol?"@@xmlMetadata":Symbol("XML Node Metadata");class ce{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t,e){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),void 0!==e&&(this.child[this.child.length-1][ae]={startIndex:e})}static getMetaDataSymbol(){return ae}}class ue{constructor(t){this.suppressValidationErr=!t}readDocType(t,e){const n={};if("O"!==t[e+3]||"C"!==t[e+4]||"T"!==t[e+5]||"Y"!==t[e+6]||"P"!==t[e+7]||"E"!==t[e+8])throw new Error("Invalid Tag instead of DOCTYPE");{e+=9;let i=1,r=!1,s=!1,o="";for(;e<t.length;e++)if("<"!==t[e]||s)if(">"===t[e]){if(s?"-"===t[e-1]&&"-"===t[e-2]&&(s=!1,i--):i--,0===i)break}else"["===t[e]?r=!0:o+=t[e];else{if(r&&de(t,"!ENTITY",e)){let i,r;e+=7,[i,r,e]=this.readEntityExp(t,e+1,this.suppressValidationErr),-1===r.indexOf("&")&&(n[i]={regx:RegExp(`&${i};`,"g"),val:r})}else if(r&&de(t,"!ELEMENT",e)){e+=8;const{index:n}=this.readElementExp(t,e+1);e=n}else if(r&&de(t,"!ATTLIST",e))e+=8;else if(r&&de(t,"!NOTATION",e)){e+=9;const{index:n}=this.readNotationExp(t,e+1,this.suppressValidationErr);e=n}else{if(!de(t,"!--",e))throw new Error("Invalid DOCTYPE");s=!0}i++,o=""}if(0!==i)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:e}}readEntityExp(t,e){e=le(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e])&&'"'!==t[e]&&"'"!==t[e];)n+=t[e],e++;if(fe(n),e=le(t,e),!this.suppressValidationErr){if("SYSTEM"===t.substring(e,e+6).toUpperCase())throw new Error("External entities are not supported");if("%"===t[e])throw new Error("Parameter entities are not supported")}let i="";return[e,i]=this.readIdentifierVal(t,e,"entity"),[n,i,--e]}readNotationExp(t,e){e=le(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;!this.suppressValidationErr&&fe(n),e=le(t,e);const i=t.substring(e,e+6).toUpperCase();if(!this.suppressValidationErr&&"SYSTEM"!==i&&"PUBLIC"!==i)throw new Error(`Expected SYSTEM or PUBLIC, found "${i}"`);e+=i.length,e=le(t,e);let r=null,s=null;if("PUBLIC"===i)[e,r]=this.readIdentifierVal(t,e,"publicIdentifier"),'"'!==t[e=le(t,e)]&&"'"!==t[e]||([e,s]=this.readIdentifierVal(t,e,"systemIdentifier"));else if("SYSTEM"===i&&([e,s]=this.readIdentifierVal(t,e,"systemIdentifier"),!this.suppressValidationErr&&!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:r,systemIdentifier:s,index:--e}}readIdentifierVal(t,e,n){let i="";const r=t[e];if('"'!==r&&"'"!==r)throw new Error(`Expected quoted string, found "${r}"`);for(e++;e<t.length&&t[e]!==r;)i+=t[e],e++;if(t[e]!==r)throw new Error(`Unterminated ${n} value`);return[++e,i]}readElementExp(t,e){e=le(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;if(!this.suppressValidationErr&&!oe(n))throw new Error(`Invalid element name: "${n}"`);let i="";if("E"===t[e=le(t,e)]&&de(t,"MPTY",e))e+=4;else if("A"===t[e]&&de(t,"NY",e))e+=2;else if("("===t[e]){for(e++;e<t.length&&")"!==t[e];)i+=t[e],e++;if(")"!==t[e])throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:n,contentModel:i.trim(),index:e}}readAttlistExp(t,e){e=le(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;fe(n),e=le(t,e);let i="";for(;e<t.length&&!/\s/.test(t[e]);)i+=t[e],e++;if(!fe(i))throw new Error(`Invalid attribute name: "${i}"`);e=le(t,e);let r="";if("NOTATION"===t.substring(e,e+8).toUpperCase()){if(r="NOTATION","("!==t[e=le(t,e+=8)])throw new Error(`Expected '(', found "${t[e]}"`);e++;let n=[];for(;e<t.length&&")"!==t[e];){let i="";for(;e<t.length&&"|"!==t[e]&&")"!==t[e];)i+=t[e],e++;if(i=i.trim(),!fe(i))throw new Error(`Invalid notation name: "${i}"`);n.push(i),"|"===t[e]&&(e++,e=le(t,e))}if(")"!==t[e])throw new Error("Unterminated list of notations");e++,r+=" ("+n.join("|")+")"}else{for(;e<t.length&&!/\s/.test(t[e]);)r+=t[e],e++;const n=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!n.includes(r.toUpperCase()))throw new Error(`Invalid attribute type: "${r}"`)}e=le(t,e);let s="";return"#REQUIRED"===t.substring(e,e+8).toUpperCase()?(s="#REQUIRED",e+=8):"#IMPLIED"===t.substring(e,e+7).toUpperCase()?(s="#IMPLIED",e+=7):[e,s]=this.readIdentifierVal(t,e,"ATTLIST"),{elementName:n,attributeName:i,attributeType:r,defaultValue:s,index:e}}}const le=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function de(t,e,n){for(let i=0;i<e.length;i++)if(e[i]!==t[n+i+1])return!1;return!0}function fe(t){if(oe(t))return t;throw new Error(`Invalid entity name ${t}`)}const he=/^[-+]?0x[a-fA-F0-9]+$/,pe=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,me={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ge(t,e={}){if(e=Object.assign({},me,e),!t||"string"!=typeof t)return t;let n=t.trim();if(void 0!==e.skipLike&&e.skipLike.test(n))return t;if("0"===t)return 0;if(e.hex&&he.test(n))return function(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(n,16);if(n.includes("e")||n.includes("E"))return function(t,e,n){if(!n.eNotation)return t;const i=e.match(we);if(i){let r=i[1]||"";const s=-1===i[3].indexOf("e")?"E":"e",o=i[2],a=r?t[o.length+1]===s:t[o.length]===s;return o.length>1&&a?t:1!==o.length||!i[3].startsWith(`.${s}`)&&i[3][0]!==s?n.leadingZeros&&!a?(e=(i[1]||"")+i[3],Number(e)):t:Number(e)}return t}(t,n,e);{const i=pe.exec(n);if(i){const r=i[1]||"",s=i[2];let o=function(t){if(t&&-1!==t.indexOf("."))return"."===(t=t.replace(/0+$/,""))?t="0":"."===t[0]?t="0"+t:"."===t[t.length-1]&&(t=t.substring(0,t.length-1)),t;return t}(i[3]);const a=r?"."===t[s.length+1]:"."===t[s.length];if(!e.leadingZeros&&(s.length>1||1===s.length&&!a))return t;{const i=Number(n),a=String(i);if(0===i)return i;if(-1!==a.search(/[eE]/))return e.eNotation?i:t;if(-1!==n.indexOf("."))return"0"===a||a===o||a===`${r}${o}`?i:t;let c=s?o:n;return s?c===a||r+c===a?i:t:c===a||c===r+a?i:t}}return t}}const we=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;class Ee{constructor(t){var e;if(this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,e)=>ke(e,10,"&#")},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,e)=>ke(e,16,"&#x")}},this.addExternalEntities=ye,this.parseXml=Se,this.parseTextData=ve,this.resolveNameSpace=be,this.buildAttributesMap=Ie,this.isItStopNode=$e,this.replaceEntitiesValue=Ae,this.readStopNodeData=Re,this.saveTextToParentTag=Pe,this.addChild=Te,this.ignoreAttributesFn="function"==typeof(e=this.options.ignoreAttributes)?e:Array.isArray(e)?t=>{for(const n of e){if("string"==typeof n&&t===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}}:()=>!1,this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let t=0;t<this.options.stopNodes.length;t++){const e=this.options.stopNodes[t];"string"==typeof e&&(e.startsWith("*.")?this.stopNodesWildcard.add(e.substring(2)):this.stopNodesExact.add(e))}}}}function ye(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}function ve(t,e,n,i,r,s,o){if(void 0!==t&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const i=this.options.tagValueProcessor(e,t,n,r,s);if(null==i)return t;if(typeof i!=typeof t||i!==t)return i;if(this.options.trimValues)return Ce(t,this.options.parseTagValue,this.options.numberParseOptions);return t.trim()===t?Ce(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function be(t){if(this.options.removeNSPrefix){const e=t.split(":"),n="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=n+e[1])}return t}const xe=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function Ie(t,e){if(!0!==this.options.ignoreAttributes&&"string"==typeof t){const n=se(t,xe),i=n.length,r={};for(let t=0;t<i;t++){const i=this.resolveNameSpace(n[t][1]);if(this.ignoreAttributesFn(i,e))continue;let s=n[t][4],o=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),"__proto__"===o&&(o="#__proto__"),void 0!==s){this.options.trimValues&&(s=s.trim()),s=this.replaceEntitiesValue(s);const t=this.options.attributeValueProcessor(i,s,e);r[o]=null==t?s:typeof t!=typeof s||t!==s?t:Ce(s,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[o]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){const t={};return t[this.options.attributesGroupName]=r,t}return r}}const Se=function(t){t=t.replace(/\r\n?/g,"\n");const e=new ce("!xml");let n=e,i="",r="";const s=new ue(this.options.processEntities);for(let o=0;o<t.length;o++){if("<"===t[o])if("/"===t[o+1]){const e=Ne(t,">",o,"Closing Tag is not closed.");let s=t.substring(o+2,e).trim();if(this.options.removeNSPrefix){const t=s.indexOf(":");-1!==t&&(s=s.substr(t+1))}this.options.transformTagName&&(s=this.options.transformTagName(s)),n&&(i=this.saveTextToParentTag(i,n,r));const a=r.substring(r.lastIndexOf(".")+1);if(s&&-1!==this.options.unpairedTags.indexOf(s))throw new Error(`Unpaired tag can not be used as closing tag: </${s}>`);let c=0;a&&-1!==this.options.unpairedTags.indexOf(a)?(c=r.lastIndexOf(".",r.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=r.lastIndexOf("."),r=r.substring(0,c),n=this.tagsNodeStack.pop(),i="",o=e}else if("?"===t[o+1]){let e=De(t,o,!1,"?>");if(!e)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,r),this.options.ignoreDeclaration&&"?xml"===e.tagName||this.options.ignorePiTags);else{const t=new ce(e.tagName);t.add(this.options.textNodeName,""),e.tagName!==e.tagExp&&e.attrExpPresent&&(t[":@"]=this.buildAttributesMap(e.tagExp,r)),this.addChild(n,t,r,o)}o=e.closeIndex+1}else if("!--"===t.substr(o+1,3)){const e=Ne(t,"--\x3e",o+4,"Comment is not closed.");if(this.options.commentPropName){const s=t.substring(o+4,e-2);i=this.saveTextToParentTag(i,n,r),n.add(this.options.commentPropName,[{[this.options.textNodeName]:s}])}o=e}else if("!D"===t.substr(o+1,2)){const e=s.readDocType(t,o);this.docTypeEntities=e.entities,o=e.i}else if("!["===t.substr(o+1,2)){const e=Ne(t,"]]>",o,"CDATA is not closed.")-2,s=t.substring(o+9,e);i=this.saveTextToParentTag(i,n,r);let a=this.parseTextData(s,n.tagname,r,!0,!1,!0,!0);null==a&&(a=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:s}]):n.add(this.options.textNodeName,a),o=e+2}else{let s=De(t,o,this.options.removeNSPrefix),a=s.tagName;const c=s.rawTagName;let u=s.tagExp,l=s.attrExpPresent,d=s.closeIndex;if(this.options.transformTagName){const t=this.options.transformTagName(a);u===a&&(u=t),a=t}n&&i&&"!xml"!==n.tagname&&(i=this.saveTextToParentTag(i,n,r,!1));const f=n;f&&-1!==this.options.unpairedTags.indexOf(f.tagname)&&(n=this.tagsNodeStack.pop(),r=r.substring(0,r.lastIndexOf("."))),a!==e.tagname&&(r+=r?"."+a:a);const h=o;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,r,a)){let e="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)"/"===a[a.length-1]?(a=a.substr(0,a.length-1),r=r.substr(0,r.length-1),u=a):u=u.substr(0,u.length-1),o=s.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(a))o=s.closeIndex;else{const n=this.readStopNodeData(t,c,d+1);if(!n)throw new Error(`Unexpected end of ${c}`);o=n.i,e=n.tagContent}const i=new ce(a);a!==u&&l&&(i[":@"]=this.buildAttributesMap(u,r)),e&&(e=this.parseTextData(e,a,r,!0,l,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),i.add(this.options.textNodeName,e),this.addChild(n,i,r,h)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){if("/"===a[a.length-1]?(a=a.substr(0,a.length-1),r=r.substr(0,r.length-1),u=a):u=u.substr(0,u.length-1),this.options.transformTagName){const t=this.options.transformTagName(a);u===a&&(u=t),a=t}const t=new ce(a);a!==u&&l&&(t[":@"]=this.buildAttributesMap(u,r)),this.addChild(n,t,r,h),r=r.substr(0,r.lastIndexOf("."))}else{const t=new ce(a);this.tagsNodeStack.push(n),a!==u&&l&&(t[":@"]=this.buildAttributesMap(u,r)),this.addChild(n,t,r,h),n=t}i="",o=d}}else i+=t[o]}return e.child};function Te(t,e,n,i){this.options.captureMetaData||(i=void 0);const r=this.options.updateTag(e.tagname,n,e[":@"]);!1===r||("string"==typeof r?(e.tagname=r,t.addChild(e,i)):t.addChild(e,i))}const Ae=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function Pe(t,e,n,i){return t&&(void 0===i&&(i=0===e.child.length),void 0!==(t=this.parseTextData(t,e.tagname,n,!1,!!e[":@"]&&0!==Object.keys(e[":@"]).length,i))&&""!==t&&e.add(this.options.textNodeName,t),t=""),t}function $e(t,e,n,i){return!(!e||!e.has(i))||!(!t||!t.has(n))}function Ne(t,e,n,i){const r=t.indexOf(e,n);if(-1===r)throw new Error(i);return r+e.length-1}function De(t,e,n,i=">"){const r=function(t,e,n=">"){let i,r="";for(let s=e;s<t.length;s++){let e=t[s];if(i)e===i&&(i="");else if('"'===e||"'"===e)i=e;else if(e===n[0]){if(!n[1])return{data:r,index:s};if(t[s+1]===n[1])return{data:r,index:s}}else"\t"===e&&(e=" ");r+=e}}(t,e+1,i);if(!r)return;let s=r.data;const o=r.index,a=s.search(/\s/);let c=s,u=!0;-1!==a&&(c=s.substring(0,a),s=s.substring(a+1).trimStart());const l=c;if(n){const t=c.indexOf(":");-1!==t&&(c=c.substr(t+1),u=c!==r.data.substr(t+1))}return{tagName:c,tagExp:s,closeIndex:o,attrExpPresent:u,rawTagName:l}}function Re(t,e,n){const i=n;let r=1;for(;n<t.length;n++)if("<"===t[n])if("/"===t[n+1]){const s=Ne(t,">",n,`${e} is not closed`);if(t.substring(n+2,s).trim()===e&&(r--,0===r))return{tagContent:t.substring(i,n),i:s};n=s}else if("?"===t[n+1]){n=Ne(t,"?>",n+1,"StopNode is not closed.")}else if("!--"===t.substr(n+1,3)){n=Ne(t,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===t.substr(n+1,2)){n=Ne(t,"]]>",n,"StopNode is not closed.")-2}else{const i=De(t,n,">");if(i){(i&&i.tagName)===e&&"/"!==i.tagExp[i.tagExp.length-1]&&r++,n=i.closeIndex}}}function Ce(t,e,n){if(e&&"string"==typeof t){const e=t.trim();return"true"===e||"false"!==e&&ge(t,n)}return function(t){return void 0!==t}(t)?t:""}function ke(t,e,n){const i=Number.parseInt(t,e);return i>=0&&i<=1114111?String.fromCodePoint(i):n+t+";"}const Oe=ce.getMetaDataSymbol();function Fe(t,e){return je(t,e)}function je(t,e,n){let i;const r={};for(let s=0;s<t.length;s++){const o=t[s],a=Me(o);let c="";if(c=void 0===n?a:n+"."+a,a===e.textNodeName)void 0===i?i=o[a]:i+=""+o[a];else{if(void 0===a)continue;if(o[a]){let t=je(o[a],e,c);const n=Ue(t,e);void 0!==o[Oe]&&(t[Oe]=o[Oe]),o[":@"]?_e(t,o[":@"],c,e):1!==Object.keys(t).length||void 0===t[e.textNodeName]||e.alwaysCreateTextNode?0===Object.keys(t).length&&(e.alwaysCreateTextNode?t[e.textNodeName]="":t=""):t=t[e.textNodeName],void 0!==r[a]&&r.hasOwnProperty(a)?(Array.isArray(r[a])||(r[a]=[r[a]]),r[a].push(t)):e.isArray(a,c,n)?r[a]=[t]:r[a]=t}}}return"string"==typeof i?i.length>0&&(r[e.textNodeName]=i):void 0!==i&&(r[e.textNodeName]=i),r}function Me(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=e[t];if(":@"!==n)return n}}function _e(t,e,n,i){if(e){const r=Object.keys(e),s=r.length;for(let o=0;o<s;o++){const s=r[o];i.isArray(s,n+"."+s,!0,!0)?t[s]=[e[s]]:t[s]=e[s]}}}function Ue(t,e){const{textNodeName:n}=e,i=Object.keys(t).length;return 0===i||!(1!==i||!t[n]&&"boolean"!=typeof t[n]&&0!==t[n])}const Le={allowBooleanAttributes:!1,unpairedTags:[]};function We(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function ze(t,e){const n=e;for(;e<t.length;e++)if("?"==t[e]||" "==t[e]){const i=t.substr(n,e-n);if(e>5&&"xml"===i)return Ge("InvalidXml","XML declaration allowed only at the start of the document.",He(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}continue}return e}function Ve(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&(n--,0===n))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function qe(t,e){let n="",i="",r=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])""===i?i=t[e]:i!==t[e]||(i="");else if(">"===t[e]&&""===i){r=!0;break}n+=t[e]}return""===i&&{value:n,index:e,tagClosed:r}}const Ye=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function Ke(t,e){const n=se(t,Ye),i={};for(let t=0;t<n.length;t++){if(0===n[t][1].length)return Ge("InvalidAttr","Attribute '"+n[t][2]+"' has no space in starting.",Je(n[t]));if(void 0!==n[t][3]&&void 0===n[t][4])return Ge("InvalidAttr","Attribute '"+n[t][2]+"' is without value.",Je(n[t]));if(void 0===n[t][3]&&!e.allowBooleanAttributes)return Ge("InvalidAttr","boolean attribute '"+n[t][2]+"' is not allowed.",Je(n[t]));const r=n[t][2];if(!Qe(r))return Ge("InvalidAttr","Attribute '"+r+"' is an invalid name.",Je(n[t]));if(i.hasOwnProperty(r))return Ge("InvalidAttr","Attribute '"+r+"' is repeated.",Je(n[t]));i[r]=1}return!0}function Be(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let n=/\d/;for("x"===t[e]&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(n))break}return-1}(t,++e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(";"===t[e])break;return-1}return e}function Ge(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function Qe(t){return oe(t)}function Xe(t){return oe(t)}function He(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function Je(t){return t.startIndex+t[1].length}const Ze=new class{constructor(t){this.externalEntities={},this.options=function(t){return Object.assign({},ne,t)}(t)}parse(t,e){if("string"!=typeof t&&t.toString)t=t.toString();else if("string"!=typeof t)throw new Error("XML data is accepted in String or Bytes[] form.");if(e){!0===e&&(e={});const n=function(t,e){e=Object.assign({},Le,e);const n=[];let i=!1,r=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let s=0;s<t.length;s++)if("<"===t[s]&&"?"===t[s+1]){if(s+=2,s=ze(t,s),s.err)return s}else{if("<"!==t[s]){if(We(t[s]))continue;return Ge("InvalidChar","char '"+t[s]+"' is not expected.",He(t,s))}{let o=s;if(s++,"!"===t[s]){s=Ve(t,s);continue}{let a=!1;"/"===t[s]&&(a=!0,s++);let c="";for(;s<t.length&&">"!==t[s]&&" "!==t[s]&&"\t"!==t[s]&&"\n"!==t[s]&&"\r"!==t[s];s++)c+=t[s];if(c=c.trim(),"/"===c[c.length-1]&&(c=c.substring(0,c.length-1),s--),!Xe(c)){let e;return e=0===c.trim().length?"Invalid space after '<'.":"Tag '"+c+"' is an invalid name.",Ge("InvalidTag",e,He(t,s))}const u=qe(t,s);if(!1===u)return Ge("InvalidAttr","Attributes for '"+c+"' have open quote.",He(t,s));let l=u.value;if(s=u.index,"/"===l[l.length-1]){const n=s-l.length;l=l.substring(0,l.length-1);const r=Ke(l,e);if(!0!==r)return Ge(r.err.code,r.err.msg,He(t,n+r.err.line));i=!0}else if(a){if(!u.tagClosed)return Ge("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",He(t,s));if(l.trim().length>0)return Ge("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",He(t,o));if(0===n.length)return Ge("InvalidTag","Closing tag '"+c+"' has not been opened.",He(t,o));{const e=n.pop();if(c!==e.tagName){let n=He(t,e.tagStartPos);return Ge("InvalidTag","Expected closing tag '"+e.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+c+"'.",He(t,o))}0==n.length&&(r=!0)}}else{const a=Ke(l,e);if(!0!==a)return Ge(a.err.code,a.err.msg,He(t,s-l.length+a.err.line));if(!0===r)return Ge("InvalidXml","Multiple possible root nodes found.",He(t,s));-1!==e.unpairedTags.indexOf(c)||n.push({tagName:c,tagStartPos:o}),i=!0}for(s++;s<t.length;s++)if("<"===t[s]){if("!"===t[s+1]){s++,s=Ve(t,s);continue}if("?"!==t[s+1])break;if(s=ze(t,++s),s.err)return s}else if("&"===t[s]){const e=Be(t,s);if(-1==e)return Ge("InvalidChar","char '&' is not expected.",He(t,s));s=e}else if(!0===r&&!We(t[s]))return Ge("InvalidXml","Extra text at the end",He(t,s));"<"===t[s]&&s--}}}return i?1==n.length?Ge("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",He(t,n[0].tagStartPos)):!(n.length>0)||Ge("InvalidXml","Invalid '"+JSON.stringify(n.map(t=>t.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):Ge("InvalidXml","Start tag expected.",1)}(t,e);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new Ee(this.options);n.addExternalEntities(this.externalEntities);const i=n.parseXml(t);return this.options.preserveOrder||void 0===i?i:Fe(i,this.options)}addEntity(t,e){if(-1!==e.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==t.indexOf("&")||-1!==t.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===e)throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}static getMetaDataSymbol(){return ce.getMetaDataSymbol()}}({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>""===e.trim()&&e.includes("\n")?"":void 0});Ze.addEntity("#xD","\r"),Ze.addEntity("#10","\n");var tn=n(1317);const en=t=>{const e="#text";for(const n in t)t.hasOwnProperty(n)&&void 0!==t[n][e]?t[n]=t[n][e]:"object"==typeof t[n]&&null!==t[n]&&(t[n]=en(t[n]));return t};var nn=n(118),rn=n(125),sn=n(130);class on extends rn.B{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new tn.k(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,e,n){const i=te.l.of(t),r=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&!!Object.values(r).find(t=>!!t.getMemberTraits().eventPayload)){const t={},n=Object.keys(r)[0];return r[n].isBlobSchema()?t[n]=e:t[n]=this.read(r[n],e),t}const s=(this.serdeContext?.utf8Encoder??nn.P)(e),o=this.parseXml(s);return this.readSchema(t,n?o[n]:o)}readSchema(t,e){const n=te.l.of(t);if(n.isUnitSchema())return;const i=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(e))return this.readSchema(n,[e]);if(null==e)return e;if("object"==typeof e){const t=!!i.sparse,r=!!i.xmlFlattened;if(n.isListSchema()){const i=n.getValueSchema(),s=[],o=i.getMergedTraits().xmlName??"member",a=r?e:(e[0]??e)[o],c=Array.isArray(a)?a:[a];for(const e of c)(null!=e||t)&&s.push(this.readSchema(i,e));return s}const s={};if(n.isMapSchema()){const i=n.getKeySchema(),o=n.getValueSchema();let a;a=r?Array.isArray(e)?e:[e]:Array.isArray(e.entry)?e.entry:[e.entry];const c=i.getMergedTraits().xmlName??"key",u=o.getMergedTraits().xmlName??"value";for(const e of a){const n=e[c],i=e[u];(null!=i||t)&&(s[n]=this.readSchema(o,i))}return s}if(n.isStructSchema()){const t=n.isUnionSchema();let i;t&&(i=new sn.F(e,s));for(const[r,o]of n.structIterator()){const n=o.getMergedTraits(),a=n.httpPayload?n.xmlName??o.getName():o.getMemberTraits().xmlName??r;t&&i.mark(a),null!=e[a]&&(s[r]=this.readSchema(o,e[a]))}return t&&i.writeUnknown(),s}if(n.isDocumentSchema())return e;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,e)}parseXml(t){if(t.length){let n;try{e=t,n=Ze.parse(e,!0)}catch(e){throw e&&"object"==typeof e&&Object.defineProperty(e,"$responseBodyText",{value:t}),e}const i="#text",r=Object.keys(n)[0],s=n[r];return s[i]&&(s[r]=s[i],delete s[i]),en(s)}var e;return{}}}var an=n(126),cn=n(1316),un=n(80),ln=n(129),dn=n(127),fn=n(117);class hn extends rn.B{settings;buffer;constructor(t){super(),this.settings=t}write(t,e,n=""){void 0===this.buffer&&(this.buffer="");const i=te.l.of(t);if(n&&!n.endsWith(".")&&(n+="."),i.isBlobSchema())("string"==typeof e||e instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??fn.n)(e)));else if(i.isBooleanSchema()||i.isNumericSchema()||i.isStringSchema())null!=e?(this.writeKey(n),this.writeValue(String(e))):i.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,un.v4)()));else if(i.isBigIntegerSchema())null!=e&&(this.writeKey(n),this.writeValue(String(e)));else if(i.isBigDecimalSchema())null!=e&&(this.writeKey(n),this.writeValue(e instanceof ln.D?e.string:String(e)));else if(i.isTimestampSchema()){if(e instanceof Date){this.writeKey(n);switch((0,an.V)(i,this.settings)){case 5:this.writeValue(e.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,dn.JV)(e));break;case 7:this.writeValue(String(e.getTime()/1e3))}}}else if(i.isDocumentSchema())Array.isArray(e)?this.write(79,e,n):e instanceof Date?this.write(4,e,n):e instanceof Uint8Array?this.write(21,e,n):e&&"object"==typeof e?this.write(143,e,n):(this.writeKey(n),this.writeValue(String(e)));else if(i.isListSchema()){if(Array.isArray(e))if(0===e.length)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{const t=i.getValueSchema(),r=this.settings.flattenLists||i.getMergedTraits().xmlFlattened;let s=1;for(const i of e){if(null==i)continue;const e=this.getKey("member",t.getMergedTraits().xmlName),o=r?`${n}${s}`:`${n}${e}.${s}`;this.write(t,i,o),++s}}}else if(i.isMapSchema()){if(e&&"object"==typeof e){const t=i.getKeySchema(),r=i.getValueSchema(),s=i.getMergedTraits().xmlFlattened;let o=1;for(const[i,a]of Object.entries(e)){if(null==a)continue;const e=this.getKey("key",t.getMergedTraits().xmlName),c=s?`${n}${o}.${e}`:`${n}entry.${o}.${e}`,u=this.getKey("value",r.getMergedTraits().xmlName),l=s?`${n}${o}.${u}`:`${n}entry.${o}.${u}`;this.write(t,i,c),this.write(r,a,l),++o}}}else if(i.isStructSchema()){if(e&&"object"==typeof e){let t=!1;for(const[r,s]of i.structIterator()){if(null==e[r]&&!s.isIdempotencyToken())continue;const i=`${n}${this.getKey(r,s.getMergedTraits().xmlName)}`;this.write(s,e[r],i),t=!0}if(!t&&i.isUnionSchema()){const{$unknown:t}=e;if(Array.isArray(t)){const[e,i]=t,r=`${n}${e}`;this.write(15,i,r)}}}}else if(!i.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${i.getName(!0)}`)}flush(){if(void 0===this.buffer)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");const t=this.buffer;return delete this.buffer,t}getKey(t,e){const n=e??t;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${(0,cn.$)(t)}=`}writeValue(t){this.buffer+=(0,cn.$)(t)}}class pn extends Ht.M{options;serializer;deserializer;mixin=new ee.U;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;const e={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new hn(e),this.deserializer=new on(e)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,e,n){const i=await super.serializeRequest(t,e,n);i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":"application/x-www-form-urlencoded"}),"unit"!==(0,Zt.L)(t.input)&&i.body||(i.body="");const r=t.name.split("#")[1]??t.name;return i.body=`Action=${r}&Version=${this.options.version}`+i.body,i.body.endsWith("&")&&(i.body=i.body.slice(-1)),i}async deserializeResponse(t,e,n){const i=this.deserializer,r=te.l.of(t.output),s={};if(n.statusCode>=300){const r=await(0,Jt.P)(n.body,e);r.byteLength>0&&Object.assign(s,await i.read(15,r)),await this.handleError(t,e,n,s,this.deserializeMetadata(n))}for(const t in n.headers){const e=n.headers[t];delete n.headers[t],n.headers[t.toLowerCase()]=e}const o=t.name.split("#")[1]??t.name,a=r.isStructSchema()&&this.useNestedResult()?o+"Result":void 0,c=await(0,Jt.P)(n.body,e);c.byteLength>0&&Object.assign(s,await i.read(r,c,a));return{$metadata:this.deserializeMetadata(n),...s}}useNestedResult(){return!0}async handleError(t,e,n,i,r){const s=this.loadQueryErrorCode(n,i)??"Unknown",o=this.loadQueryError(i),a=this.loadQueryErrorMessage(i);o.message=a,o.Error={Type:o.Type,Code:o.Code,Message:a};const{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(s,this.options.defaultNamespace,n,o,r,this.mixin.findQueryCompatibleError),d=te.l.of(c),f=new(l.O.for(c[1]).getErrorCtor(c)??Error)(a),h={Type:o.Error.Type,Code:o.Error.Code,Error:o.Error};for(const[t,e]of d.structIterator()){const n=e.getMergedTraits().xmlName??t,r=o[n]??i[n];h[t]=this.deserializer.readSchema(e,r)}throw this.mixin.decorateServiceException(Object.assign(f,u,{$fault:d.getMergedTraits().error,message:a},h),i)}loadQueryErrorCode(t,e){const n=(e.Errors?.[0]?.Error??e.Errors?.Error??e.Error)?.Code;return void 0!==n?n:404==t.statusCode?"NotFound":void 0}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){const e=this.loadQueryError(t);return e?.message??e?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}var mn=n(79),gn=n(73),wn=n(116),En=n(87),yn=n(43),vn=n(132),bn=n(133),xn=n(44);const In="required",Sn="type",Tn="fn",An="argv",Pn="ref",$n=!1,Nn=!0,Dn="booleanEquals",Rn="stringEquals",Cn="sigv4",kn="us-east-1",On="endpoint",Fn="https://sts.{Region}.{PartitionResult#dnsSuffix}",jn="tree",Mn="error",_n="getAttr",Un={[In]:!1,[Sn]:"string"},Ln={[In]:!0,default:!1,[Sn]:"boolean"},Wn={[Pn]:"Endpoint"},zn={[Tn]:"isSet",[An]:[{[Pn]:"Region"}]},Vn={[Pn]:"Region"},qn={[Tn]:"aws.partition",[An]:[Vn],assign:"PartitionResult"},Yn={[Pn]:"UseFIPS"},Kn={[Pn]:"UseDualStack"},Bn={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Cn,signingName:"sts",signingRegion:kn}]},headers:{}},Gn={},Qn={conditions:[{[Tn]:Rn,[An]:[Vn,"aws-global"]}],[On]:Bn,[Sn]:On},Xn={[Tn]:Dn,[An]:[Yn,!0]},Hn={[Tn]:Dn,[An]:[Kn,!0]},Jn={[Tn]:_n,[An]:[{[Pn]:"PartitionResult"},"supportsFIPS"]},Zn={[Pn]:"PartitionResult"},ti={[Tn]:Dn,[An]:[!0,{[Tn]:_n,[An]:[Zn,"supportsDualStack"]}]},ei=[{[Tn]:"isSet",[An]:[Wn]}],ni=[Xn],ii=[Hn],ri={version:"1.0",parameters:{Region:Un,UseDualStack:Ln,UseFIPS:Ln,Endpoint:Un,UseGlobalEndpoint:Ln},rules:[{conditions:[{[Tn]:Dn,[An]:[{[Pn]:"UseGlobalEndpoint"},Nn]},{[Tn]:"not",[An]:ei},zn,qn,{[Tn]:Dn,[An]:[Yn,$n]},{[Tn]:Dn,[An]:[Kn,$n]}],rules:[{conditions:[{[Tn]:Rn,[An]:[Vn,"ap-northeast-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"ap-south-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"ap-southeast-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"ap-southeast-2"]}],endpoint:Bn,[Sn]:On},Qn,{conditions:[{[Tn]:Rn,[An]:[Vn,"ca-central-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"eu-central-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"eu-north-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"eu-west-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"eu-west-2"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"eu-west-3"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"sa-east-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,kn]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"us-east-2"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"us-west-1"]}],endpoint:Bn,[Sn]:On},{conditions:[{[Tn]:Rn,[An]:[Vn,"us-west-2"]}],endpoint:Bn,[Sn]:On},{endpoint:{url:Fn,properties:{authSchemes:[{name:Cn,signingName:"sts",signingRegion:"{Region}"}]},headers:Gn},[Sn]:On}],[Sn]:jn},{conditions:ei,rules:[{conditions:ni,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[Sn]:Mn},{conditions:ii,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[Sn]:Mn},{endpoint:{url:Wn,properties:Gn,headers:Gn},[Sn]:On}],[Sn]:jn},{conditions:[zn],rules:[{conditions:[qn],rules:[{conditions:[Xn,Hn],rules:[{conditions:[{[Tn]:Dn,[An]:[Nn,Jn]},ti],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gn,headers:Gn},[Sn]:On}],[Sn]:jn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[Sn]:Mn}],[Sn]:jn},{conditions:ni,rules:[{conditions:[{[Tn]:Dn,[An]:[Jn,Nn]}],rules:[{conditions:[{[Tn]:Rn,[An]:[{[Tn]:_n,[An]:[Zn,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Gn,headers:Gn},[Sn]:On},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Gn,headers:Gn},[Sn]:On}],[Sn]:jn},{error:"FIPS is enabled but this partition does not support FIPS",[Sn]:Mn}],[Sn]:jn},{conditions:ii,rules:[{conditions:[ti],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gn,headers:Gn},[Sn]:On}],[Sn]:jn},{error:"DualStack is enabled but this partition does not support DualStack",[Sn]:Mn}],[Sn]:jn},Qn,{endpoint:{url:Fn,properties:Gn,headers:Gn},[Sn]:On}],[Sn]:jn}],[Sn]:jn},{error:"Invalid Configuration: Missing Region",[Sn]:Mn}]},si=new vn.k({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),oi=(t,e={})=>si.get(t,()=>(0,bn.s)(ri,{endpointParams:t,logger:e.logger}));xn.m.aws=yn.UF;const ai=t=>{(0,Kt.I)(process.version);const e=(0,Qt.I)(t),n=()=>e().then(Bt.l),i=(t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??wn.E,base64Encoder:t?.base64Encoder??fn.n,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??oi,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Ct,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Mt.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new zt.m}],logger:t?.logger??new mn.N,protocol:t?.protocol??pn,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.sts",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/",version:"2011-06-15",serviceTarget:"AWSSecurityTokenServiceV20110615"},serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??gn.D,utf8Decoder:t?.utf8Decoder??En.a,utf8Encoder:t?.utf8Encoder??nn.P}))(t);(0,Ft.I)(process.version);const o={profile:t?.profile,logger:i.logger};return{...i,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,s.Z)(jt.$,o),bodyLengthChecker:t?.bodyLengthChecker??Gt.n,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,_t.pf)({serviceId:i.serviceId,clientVersion:Ot.rE}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4")||(async e=>await t.credentialDefaultProvider(e?.o||{})()),signer:new Mt.f2},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new zt.m}],maxAttempts:t?.maxAttempts??(0,s.Z)(Tt.qs,t),region:t?.region??(0,s.Z)(r.GG,{...r.zH,...o}),requestHandler:qt.$.create(t?.requestHandler??n),retryMode:t?.retryMode??(0,s.Z)({...Tt.kN,default:async()=>(await n()).retryMode||Xt.L0},t),sha256:t?.sha256??Vt.V.bind(null,"sha256"),streamCollector:t?.streamCollector??Yt.k,useDualstackEndpoint:t?.useDualstackEndpoint??(0,s.Z)(Lt.e$,o),useFipsEndpoint:t?.useFipsEndpoint??(0,s.Z)(Wt.Ko,o),userAgentAppId:t?.userAgentAppId??(0,s.Z)(Ut.hV,o)}};var ci=n(134),ui=n(135),li=n(136);class di extends Pt.K{config;constructor(...[t]){const e=ai(t||{});super(e),this.initConfig=e;const n=(i=e,Object.assign(i,{useDualstackEndpoint:i.useDualstackEndpoint??!1,useFipsEndpoint:i.useFipsEndpoint??!1,useGlobalEndpoint:i.useGlobalEndpoint??!1,defaultSigningName:"sts"}));var i;const r=(0,gt.D)(n),s=(0,Tt.$z)(r),o=(0,Et.T)(s),a=(0,ht.OV)(o),c=(0,St.C)(a),u=((t,e)=>{const n=Object.assign((0,ci.R)(t),(0,li.xA)(t),(0,ui.e)(t),(t=>{const e=t.httpAuthSchemes;let n=t.httpAuthSchemeProvider,i=t.credentials;return{setHttpAuthScheme(t){const n=e.findIndex(e=>e.schemeId===t.schemeId);-1===n?e.push(t):e.splice(n,1,t)},httpAuthSchemes:()=>e,setHttpAuthSchemeProvider(t){n=t},httpAuthSchemeProvider:()=>n,setCredentials(t){i=t},credentials:()=>i}})(t));return e.forEach(t=>t.configure(n)),Object.assign(t,(0,ci.$)(n),(0,li.uv)(n),(0,ui.j)(n),{httpAuthSchemes:(i=n).httpAuthSchemes(),httpAuthSchemeProvider:i.httpAuthSchemeProvider(),credentials:i.credentials()});var i})(kt(c),t?.extensions||[]);this.config=u,this.middlewareStack.use((0,xt.wq)(this.config)),this.middlewareStack.use((0,wt.sM)(this.config)),this.middlewareStack.use((0,At.ey)(this.config)),this.middlewareStack.use((0,It.vK)(this.config)),this.middlewareStack.use((0,ht.TC)(this.config)),this.middlewareStack.use((0,pt.Y7)(this.config)),this.middlewareStack.use((0,mt.n)(this.config)),this.middlewareStack.use((0,yt.w)(this.config,{httpAuthSchemeParametersProvider:Rt,identityProviderConfigProvider:async t=>new vt.h({"aws.auth#sigv4":t.credentials})})),this.middlewareStack.use((0,bt.l)(this.config))}destroy(){super.destroy()}}const fi=(t,e)=>e?class extends t{constructor(t){super(t);for(const t of e)this.middlewareStack.use(t)}}:t,hi=(t={},e)=>lt(t,fi(di,e)),pi=(t={},e)=>dt(t,fi(di,e))},1316(t,e,n){function i(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}n.d(e,{$:()=>i})},1317(t,e,n){n.d(e,{k:()=>x});var i=n(112),r=n(1315);const s="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",o="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",a="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",c="(\\d?\\d)",u="(\\d{4})",l=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),d=new RegExp(`^${s}, ${c} ${o} ${u} ${a} GMT$`),f=new RegExp(`^${s}, ${c}-${o}-(\\d\\d) ${a} GMT$`),h=new RegExp(`^${s} ${o} ( [1-9]|\\d\\d) ${a} ${u}$`),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function m(t,e,n){const i=Number(t);if(i<e||i>n)throw new Error(`Value ${i} out of range [${e}, ${n}]`)}var g=n(128),w=n(129),E=n(116),y=n(118),v=n(120),b=n(126);class x extends v.f{settings;constructor(t){super(),this.settings=t}read(t,e){const n=i.l.of(t);if(n.isListSchema())return(0,r.G)(e).map(t=>this.read(n.getValueSchema(),t));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??E.E)(e);if(n.isTimestampSchema()){switch((0,b.V)(n,this.settings)){case 5:return(t=>{if(null==t)return;if("string"!=typeof t)throw new TypeError("RFC3339 timestamps must be strings");const e=l.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);const[,n,i,r,s,o,a,,c,u]=e;m(i,1,12),m(r,1,31),m(s,0,23),m(o,0,59),m(a,0,60);const d=new Date(Date.UTC(Number(n),Number(i)-1,Number(r),Number(s),Number(o),Number(a),Number(c)?Math.round(1e3*parseFloat(`0.${c}`)):0));if(d.setUTCFullYear(Number(n)),"Z"!=u.toUpperCase()){const[,t,e,n]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],i="-"===t?1:-1;d.setTime(d.getTime()+i*(60*Number(e)*60*1e3+60*Number(n)*1e3))}return d})(e);case 6:return(t=>{if(null==t)return;if("string"!=typeof t)throw new TypeError("RFC7231 timestamps must be strings.");let e,n,i,r,s,o,a,c;if((c=d.exec(t))?[,e,n,i,r,s,o,a]=c:(c=f.exec(t))?([,e,n,i,r,s,o,a]=c,i=(Number(i)+1900).toString()):(c=h.exec(t))&&([,n,e,r,s,o,a,i]=c),i&&o){const t=Date.UTC(Number(i),p.indexOf(n),Number(e),Number(r),Number(s),Number(o),a?Math.round(1e3*parseFloat(`0.${a}`)):0);m(e,1,31),m(r,0,23),m(s,0,59),m(o,0,60);const c=new Date(t);return c.setUTCFullYear(Number(i)),c}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)})(e);case 7:return(t=>{if(null==t)return;let e=NaN;if("number"==typeof t)e=t;else if("string"==typeof t){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else"object"==typeof t&&1===t.tag&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(1e3*e))})(e);default:return new Date(e)}}if(n.isStringSchema()){const t=n.getMergedTraits().mediaType;let i=e;if(t){n.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i));return("application/json"===t||t.endsWith("+json"))&&(i=g.A.from(i)),i}}return n.isNumericSchema()?Number(e):n.isBigIntegerSchema()?BigInt(e):n.isBigDecimalSchema()?new w.D(e,"bigDecimal"):n.isBooleanSchema()?"true"===String(e).toLowerCase():e}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??y.P)((this.serdeContext?.base64Decoder??E.E)(t))}}},1315(t,e,n){n.d(e,{G:()=>i});const i=t=>{const e=t.length,n=[];let i,r=!1,s=0;for(let o=0;o<e;++o){const e=t[o];switch(e){case'"':"\\"!==i&&(r=!r);break;case",":r||(n.push(t.slice(s,o)),s=o+1)}i=e}return n.push(t.slice(s)),n.map(t=>{const e=(t=t.trim()).length;return e<2?t:('"'===t[0]&&'"'===t[e-1]&&(t=t.slice(1,e-1)),t.replace(/\\"/g,'"'))})}},1318(t,e,n){n.d(e,{m:()=>i});class i{async sign(t,e,n){return t}}},1320(t){t.exports={rE:"3.985.0"}}};