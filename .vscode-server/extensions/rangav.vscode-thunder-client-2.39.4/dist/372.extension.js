"use strict";exports.id=372,exports.ids=[372],exports.modules={1313(e,t,r){r.d(t,{Y:()=>B});var n=r(111),s=r(113);function o(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");const n=e.split(t);if(1===r)return n;const s=[];let o="";for(let e=0;e<n.length;e++)""===o?o=n[e]:o+=t+n[e],(e+1)%r===0&&(s.push(o),o="");return""!==o&&s.push(o),s}var i=r(1314),a=r(37),c=r(1310),u=r(114),f=r(1315),l=r(118);class h extends l.t{async serializeRequest(e,t,r){const o={...t??{}},i=this.serializer,c={},u={},l=await r.endpoint(),h=n.l.of(e?.input),d=h.getSchema();let w,p=!1;const m=new a.K({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:c,headers:u,body:void 0});if(l){this.updateServiceEndpoint(m,l),this.setHostPrefix(m,e,o);const t=(0,s.c)(e.traits);if(t.http){m.method=t.http[0];const[e,r]=t.http[1].split("?");"/"==m.path?m.path=e:m.path+=e;const n=new URLSearchParams(r??"");Object.assign(c,Object.fromEntries(n))}}for(const[e,t]of h.structIterator()){const r=t.getMergedTraits()??{},n=o[e];if(null!=n||t.isIdempotencyToken())if(r.httpPayload){if(t.isStreaming()){t.isStructSchema()?o[e]&&(w=await this.serializeEventStream({eventStream:o[e],requestSchema:h})):w=n}else i.write(t,n),w=i.flush();delete o[e]}else if(r.httpLabel){i.write(t,n);const r=i.flush();m.path.includes(`{${e}+}`)?m.path=m.path.replace(`{${e}+}`,r.split("/").map(f.$).join("/")):m.path.includes(`{${e}}`)&&(m.path=m.path.replace(`{${e}}`,(0,f.$)(r))),delete o[e]}else if(r.httpHeader)i.write(t,n),u[r.httpHeader.toLowerCase()]=String(i.flush()),delete o[e];else if("string"==typeof r.httpPrefixHeaders){for(const[e,s]of Object.entries(n)){const n=r.httpPrefixHeaders+e;i.write([t.getValueSchema(),{httpHeader:n}],s),u[n.toLowerCase()]=i.flush()}delete o[e]}else r.httpQuery||r.httpQueryParams?(this.serializeQuery(t,n,c),delete o[e]):p=!0;else if(r.httpLabel&&(m.path.includes(`{${e}+}`)||m.path.includes(`{${e}}`)))throw new Error(`No value provided for input HTTP label: ${e}.`)}return p&&o&&(i.write(d,o),w=i.flush()),m.headers=u,m.query=c,m.body=w,m}serializeQuery(e,t,r){const n=this.serializer,s=e.getMergedTraits();if(s.httpQueryParams){for(const[n,o]of Object.entries(t))if(!(n in r)){const t=e.getValueSchema();Object.assign(t.getMergedTraits(),{...s,httpQuery:n,httpQueryParams:void 0}),this.serializeQuery(t,o,r)}}else if(e.isListSchema()){const o=!!e.getMergedTraits().sparse,i=[];for(const r of t){n.write([e.getValueSchema(),s],r);const t=n.flush();(o||void 0!==t)&&i.push(t)}r[s.httpQuery]=i}else n.write([e,s],t),r[s.httpQuery]=n.flush()}async deserializeResponse(e,t,r){const s=this.deserializer,o=n.l.of(e.output),i={};if(r.statusCode>=300){const n=await(0,u.P)(r.body,t);throw n.byteLength>0&&Object.assign(i,await s.read(15,n)),await this.handleError(e,t,r,i,this.deserializeMetadata(r)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(const e in r.headers){const t=r.headers[e];delete r.headers[e],r.headers[e.toLowerCase()]=t}const a=await this.deserializeHttpMessage(o,t,r,i);if(a.length){const e=await(0,u.P)(r.body,t);if(e.byteLength>0){const t=await s.read(o,e);for(const e of a)i[e]=t[e]}}else a.discardResponseBody&&await(0,u.P)(r.body,t);return i.$metadata=this.deserializeMetadata(r),i}async deserializeHttpMessage(e,t,r,s,a){let f;f=s instanceof Set?a:s;let l=!0;const h=this.deserializer,d=n.l.of(e),w=[];for(const[e,n]of d.structIterator()){const s=n.getMemberTraits();if(s.httpPayload){l=!1;if(n.isStreaming()){const t=n.isStructSchema();f[e]=t?await this.deserializeEventStream({response:r,responseSchema:d}):(0,c.c)(r.body)}else if(r.body){const s=await(0,u.P)(r.body,t);s.byteLength>0&&(f[e]=await h.read(n,s))}}else if(s.httpHeader){const t=String(s.httpHeader).toLowerCase(),a=r.headers[t];if(null!=a)if(n.isListSchema()){const r=n.getValueSchema();let s;r.getMergedTraits().httpHeader=t,s=r.isTimestampSchema()&&4===r.getSchema()?o(a,",",2):(0,i.G)(a);const c=[];for(const e of s)c.push(await h.read(r,e.trim()));f[e]=c}else f[e]=await h.read(n,a)}else if(void 0!==s.httpPrefixHeaders){f[e]={};for(const[t,o]of Object.entries(r.headers))if(t.startsWith(s.httpPrefixHeaders)){const r=n.getValueSchema();r.getMergedTraits().httpHeader=t,f[e][t.slice(s.httpPrefixHeaders.length)]=await h.read(r,o)}}else s.httpResponseCode?f[e]=r.statusCode:w.push(e)}return w.discardResponseBody=l,w}}var d=r(126);function w(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var p=r(127),m=r(79),b=r(116),y=r(120),g=r(125);class v extends y.f{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,t){const r=n.l.of(e);switch(typeof t){case"object":if(null===t)return void(this.stringBuffer="null");if(r.isTimestampSchema()){if(!(t instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${t} when schema expected Date in ${r.getName(!0)}`);switch((0,g.V)(r,this.settings)){case 5:this.stringBuffer=t.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=(0,d.JV)(t);break;default:this.stringBuffer=String(t.getTime()/1e3)}return}if(r.isBlobSchema()&&"byteLength"in t)return void(this.stringBuffer=(this.serdeContext?.base64Encoder??b.n)(t));if(r.isListSchema()&&Array.isArray(t)){let e="";for(const n of t){this.write([r.getValueSchema(),r.getMergedTraits()],n);const t=this.flush();""!==e&&(e+=", "),e+=r.getValueSchema().isTimestampSchema()?t:w(t)}return void(this.stringBuffer=e)}this.stringBuffer=JSON.stringify(t,null,2);break;case"string":const e=r.getMergedTraits().mediaType;let n=t;if(e){if(("application/json"===e||e.endsWith("+json"))&&(n=p.A.from(n)),r.getMergedTraits().httpHeader)return void(this.stringBuffer=(this.serdeContext?.base64Encoder??b.n)(n.toString()))}this.stringBuffer=t;break;default:r.isIdempotencyToken()?this.stringBuffer=(0,m.v4)():this.stringBuffer=String(t)}}flush(){const e=this.stringBuffer;return this.stringBuffer="",e}}class ${codecSerializer;stringSerializer;buffer;constructor(e,t,r=new v(t)){this.codecSerializer=e,this.stringSerializer=r}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,t){const r=n.l.of(e),s=r.getMergedTraits();return s.httpHeader||s.httpLabel||s.httpQuery?(this.stringSerializer.write(r,t),void(this.buffer=this.stringSerializer.flush())):this.codecSerializer.write(r,t)}flush(){if(void 0!==this.buffer){const e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}var E=r(117),N=r(86),T=r(1316);class S extends y.f{codecDeserializer;stringDeserializer;constructor(e,t){super(),this.codecDeserializer=e,this.stringDeserializer=new T.k(t)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,t){const r=n.l.of(e),s=r.getMergedTraits(),o=this.serdeContext?.utf8Encoder??E.P;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(r,o(t));if(s.httpPayload){if(r.isBlobSchema()){const e=this.serdeContext?.utf8Decoder??N.a;return"string"==typeof t?e(t):t}if(r.isStringSchema())return"byteLength"in t?o(t):t}return this.codecDeserializer.read(r,t)}}var x=r(119),R=r(121),D=r(123),j=r(130);class B extends h{serializer;deserializer;codec;mixin=new R.U;constructor({defaultNamespace:e}){super({defaultNamespace:e});const t={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new D.V(t),this.serializer=new $(this.codec.createSerializer(),t),this.deserializer=new S(this.codec.createDeserializer(),t)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,t,r){const s=await super.serializeRequest(e,t,r),o=n.l.of(e.input);if(!s.headers["content-type"]){const e=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);e&&(s.headers["content-type"]=e)}return null==s.body&&s.headers["content-type"]===this.getDefaultContentType()&&(s.body="{}"),s}async deserializeResponse(e,t,r){const s=await super.deserializeResponse(e,t,r),o=n.l.of(e.output);for(const[e,t]of o.structIterator())t.getMemberTraits().httpPayload&&!(e in s)&&(s[e]=null);return s}async handleError(e,t,r,s,o){const i=(0,j.cJ)(r,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,r,s,o),u=n.l.of(a),f=s.message??s.Message??"Unknown",l=new(x.O.for(a[1]).getErrorCtor(a)??Error)(f);await this.deserializeHttpMessage(a,t,r,s);const h={};for(const[e,t]of u.structIterator()){const r=t.getMergedTraits().jsonName??e;h[e]=this.codec.createDeserializer().readObject(t,s[r])}throw this.mixin.decorateServiceException(Object.assign(l,c,{$fault:u.getMergedTraits().error,message:f},h),s)}getDefaultContentType(){return"application/json"}}},1315(e,t,r){function n(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}r.d(t,{$:()=>n})},1316(e,t,r){r.d(t,{k:()=>E});var n=r(111),s=r(1314);const o="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",i="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",a="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",c="(\\d?\\d)",u="(\\d{4})",f=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),l=new RegExp(`^${o}, ${c} ${i} ${u} ${a} GMT$`),h=new RegExp(`^${o}, ${c}-${i}-(\\d\\d) ${a} GMT$`),d=new RegExp(`^${o} ${i} ( [1-9]|\\d\\d) ${a} ${u}$`),w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function p(e,t,r){const n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var m=r(127),b=r(128),y=r(115),g=r(117),v=r(120),$=r(125);class E extends v.f{settings;constructor(e){super(),this.settings=e}read(e,t){const r=n.l.of(e);if(r.isListSchema())return(0,s.G)(t).map(e=>this.read(r.getValueSchema(),e));if(r.isBlobSchema())return(this.serdeContext?.base64Decoder??y.E)(t);if(r.isTimestampSchema()){switch((0,$.V)(r,this.settings)){case 5:return(e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC3339 timestamps must be strings");const t=f.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);const[,r,n,s,o,i,a,,c,u]=t;p(n,1,12),p(s,1,31),p(o,0,23),p(i,0,59),p(a,0,60);const l=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(o),Number(i),Number(a),Number(c)?Math.round(1e3*parseFloat(`0.${c}`)):0));if(l.setUTCFullYear(Number(r)),"Z"!=u.toUpperCase()){const[,e,t,r]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],n="-"===e?1:-1;l.setTime(l.getTime()+n*(60*Number(t)*60*1e3+60*Number(r)*1e3))}return l})(t);case 6:return(e=>{if(null==e)return;if("string"!=typeof e)throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,s,o,i,a,c;if((c=l.exec(e))?[,t,r,n,s,o,i,a]=c:(c=h.exec(e))?([,t,r,n,s,o,i,a]=c,n=(Number(n)+1900).toString()):(c=d.exec(e))&&([,r,t,s,o,i,a,n]=c),n&&i){const e=Date.UTC(Number(n),w.indexOf(r),Number(t),Number(s),Number(o),Number(i),a?Math.round(1e3*parseFloat(`0.${a}`)):0);p(t,1,31),p(s,0,23),p(o,0,59),p(i,0,60);const c=new Date(e);return c.setUTCFullYear(Number(n)),c}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)})(t);case 7:return(e=>{if(null==e)return;let t=NaN;if("number"==typeof e)t=e;else if("string"==typeof e){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else"object"==typeof e&&1===e.tag&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(1e3*t))})(t);default:return new Date(t)}}if(r.isStringSchema()){const e=r.getMergedTraits().mediaType;let n=t;if(e){r.getMergedTraits().httpHeader&&(n=this.base64ToUtf8(n));return("application/json"===e||e.endsWith("+json"))&&(n=m.A.from(n)),n}}return r.isNumericSchema()?Number(t):r.isBigIntegerSchema()?BigInt(t):r.isBigDecimalSchema()?new b.D(t,"bigDecimal"):r.isBooleanSchema()?"true"===String(t).toLowerCase():t}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??g.P)((this.serdeContext?.base64Decoder??y.E)(e))}}},1314(e,t,r){r.d(t,{G:()=>n});const n=e=>{const t=e.length,r=[];let n,s=!1,o=0;for(let i=0;i<t;++i){const t=e[i];switch(t){case'"':"\\"!==n&&(s=!s);break;case",":s||(r.push(e.slice(o,i)),o=i+1)}n=t}return r.push(e.slice(o)),r.map(e=>{const t=(e=e.trim()).length;return t<2?e:('"'===e[0]&&'"'===e[t-1]&&(e=e.slice(1,t-1)),e.replace(/\\"/g,'"'))})}},1317(e,t,r){r.d(t,{m:()=>n});class n{async sign(e,t,r){return e}}},1310(e,t,r){r.d(t,{c:()=>m});var n=r(103),s=r(87),o=r(12),i=r(115);const a=async e=>"function"==typeof Blob&&e instanceof Blob||"Blob"===e.constructor?.name?void 0!==Blob.prototype.arrayBuffer?new Uint8Array(await e.arrayBuffer()):async function(e){const t=await function(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{if(2!==n.readyState)return r(new Error("Reader aborted too early"));const e=n.result??"",s=e.indexOf(","),o=s>-1?s+1:e.length;t(e.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}(e),r=(0,i.E)(t);return new Uint8Array(r)}(e):async function(e){const t=[],r=e.getReader();let n=!1,s=0;for(;!n;){const{done:e,value:o}=await r.read();o&&(t.push(o),s+=o.length),n=e}const o=new Uint8Array(s);let i=0;for(const e of t)o.set(e,i),i+=e.length;return o}(e);var c=r(116),u=r(84),f=r(117);const l=e=>"function"==typeof ReadableStream&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),h="The stream has already been transformed.",d=e=>{if(!w(e)&&!l(e)){throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${e?.__proto__?.constructor?.name||e}`)}let t=!1;const r=async()=>{if(t)throw new Error(h);return t=!0,await a(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async e=>{const t=await r();if("base64"===e)return(0,c.n)(t);if("hex"===e)return(0,u.n)(t);if(void 0===e||"utf8"===e||"utf-8"===e)return(0,f.P)(t);if("function"==typeof TextDecoder)return new TextDecoder(e).decode(t);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(h);if(t=!0,w(e))return(e=>{if("function"!=typeof e.stream)throw new Error("Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.\nIf you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body");return e.stream()})(e);if(l(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},w=e=>"function"==typeof Blob&&e instanceof Blob,p="The stream has already been transformed.",m=e=>{if(!(e instanceof o.Readable))try{return d(e)}catch(t){throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${e?.__proto__?.constructor?.name||e}`)}let t=!1;const r=async()=>{if(t)throw new Error(p);return t=!0,await(0,n.k)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async e=>{const t=await r();if(void 0===e||Buffer.isEncoding(e))return(0,s.Q)(t.buffer,t.byteOffset,t.byteLength).toString(e);return new TextDecoder(e).decode(t)},transformToWebStream:()=>{if(t)throw new Error(p);if(null!==e.readableFlowing)throw new Error("The stream has been consumed by other callbacks.");if("function"!=typeof o.Readable.toWeb)throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,o.Readable.toWeb(e)}})}}};